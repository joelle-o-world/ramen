/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/demo.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/transformation-matrix/src/applyToPoint.js":
/*!****************************************************************!*\
  !*** ./node_modules/transformation-matrix/src/applyToPoint.js ***!
  \****************************************************************/
/*! exports provided: applyToPoint, applyToPoints */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"applyToPoint\", function() { return applyToPoint; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"applyToPoints\", function() { return applyToPoints; });\n/**\n * Calculate a point transformed with an affine matrix\n * @param matrix {Matrix} Affine Matrix\n * @param  point {Point} Point\n * @returns {Point} Point\n */\nfunction applyToPoint (matrix, point) {\n  return Array.isArray(point) ? [\n    matrix.a * point[0] + matrix.c * point[1] + matrix.e,\n    matrix.b * point[0] + matrix.d * point[1] + matrix.f\n  ] : {\n    x: matrix.a * point.x + matrix.c * point.y + matrix.e,\n    y: matrix.b * point.x + matrix.d * point.y + matrix.f\n  }\n}\n\n/**\n * Calculate an array of points transformed with an affine matrix\n * @param matrix {Matrix} Affine Matrix\n * @param points {Point[]} Array of point\n * @returns {Point[]} Array of point\n */\nfunction applyToPoints (matrix, points) {\n  return points.map(point => applyToPoint(matrix, point))\n}\n\n\n//# sourceURL=webpack:///./node_modules/transformation-matrix/src/applyToPoint.js?");

/***/ }),

/***/ "./node_modules/transformation-matrix/src/fromDefinition.js":
/*!******************************************************************!*\
  !*** ./node_modules/transformation-matrix/src/fromDefinition.js ***!
  \******************************************************************/
/*! exports provided: fromDefinition */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"fromDefinition\", function() { return fromDefinition; });\n/* harmony import */ var _fromObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./fromObject */ \"./node_modules/transformation-matrix/src/fromObject.js\");\n/* harmony import */ var _translate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./translate */ \"./node_modules/transformation-matrix/src/translate.js\");\n/* harmony import */ var _scale__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./scale */ \"./node_modules/transformation-matrix/src/scale.js\");\n/* harmony import */ var _rotate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./rotate */ \"./node_modules/transformation-matrix/src/rotate.js\");\n/* harmony import */ var _skew__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./skew */ \"./node_modules/transformation-matrix/src/skew.js\");\n/* harmony import */ var _shear__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./shear */ \"./node_modules/transformation-matrix/src/shear.js\");\n\n\n\n\n\n\n\n/**\n * Converts array of matrix descriptor to array of matrix\n * @param definitionOrArrayOfDefinition {Object[]} Array of object describing the matrix\n * @returns {Matrix[]} Array of matrix\n *\n * @example\n * > fromDefinition([\n *  { type: 'matrix', a:1, b:2, c:3, d:4, e:5, f:6 },\n *  { type: 'translate', tx: 10, ty: 20 },\n *  { type: 'scale', sx: 2, sy: 4 },\n *  { type: 'rotate', angle: 90, cx: 50, cy: 25 },\n *  { type: 'skewX', angle: 45 },\n *  { type: 'skewY',  angle: 45 },\n *  { type: 'shear', shx: 10, shy: 20}\n * ])\n *\n * [\n *  { a: 1, b: 2, c: 3, d: 4, e: 5, f: 6 },\n *  { a: 1, c: 0, e: 10, b: 0, d: 1, f: 20 },\n *  { a: 2, c: 0, e: 0, b: 0, d: 4, f: 0 },\n *  { a: 6.123, c: -1, e: 0, b: 1, d: 6.123, f: 0 },\n *  { a: 1, c: 0.99.., e: 0, b: 0, d: 1, f: 0 },\n *  { a: 1, c: 0, e: 0, b: 0.99, d: 1, f: 0 },\n *  { a: 1, c: 10, e: 0, b: 20, d: 1, f: 0 }\n * ]\n **/\nfunction fromDefinition (definitionOrArrayOfDefinition) {\n  return Array.isArray(definitionOrArrayOfDefinition)\n    ? definitionOrArrayOfDefinition.map(mapper)\n    : mapper(definitionOrArrayOfDefinition)\n\n  function mapper (descriptor) {\n    switch (descriptor.type) {\n      case 'matrix':\n        if ('a' in descriptor &&\n          'b' in descriptor &&\n          'c' in descriptor &&\n          'd' in descriptor &&\n          'e' in descriptor &&\n          'f' in descriptor\n        ) {\n          return Object(_fromObject__WEBPACK_IMPORTED_MODULE_0__[\"fromObject\"])(descriptor)\n        } else {\n          throw new Error('MISSING_MANDATORY_PARAM')\n        }\n\n      case 'translate':\n        if (!('tx' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n\n        if ('ty' in descriptor) return Object(_translate__WEBPACK_IMPORTED_MODULE_1__[\"translate\"])(descriptor.tx, descriptor.ty)\n\n        return Object(_translate__WEBPACK_IMPORTED_MODULE_1__[\"translate\"])(descriptor.tx)\n\n      case 'scale':\n        if (!('sx' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n\n        if ('sy' in descriptor) return Object(_scale__WEBPACK_IMPORTED_MODULE_2__[\"scale\"])(descriptor.sx, descriptor.sy)\n\n        return Object(_scale__WEBPACK_IMPORTED_MODULE_2__[\"scale\"])(descriptor.sx)\n\n      case 'rotate':\n        if (!('angle' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n\n        if ('cx' in descriptor && 'cy' in descriptor) {\n          return Object(_rotate__WEBPACK_IMPORTED_MODULE_3__[\"rotateDEG\"])(descriptor.angle, descriptor.cx, descriptor.cy)\n        }\n        return Object(_rotate__WEBPACK_IMPORTED_MODULE_3__[\"rotateDEG\"])(descriptor.angle)\n\n      case 'skewX':\n        if (!('angle' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n        return Object(_skew__WEBPACK_IMPORTED_MODULE_4__[\"skewDEG\"])(descriptor.angle, 0)\n\n      case 'skewY':\n        if (!('angle' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n        return Object(_skew__WEBPACK_IMPORTED_MODULE_4__[\"skewDEG\"])(0, descriptor.angle)\n\n      case 'shear':\n        if (!('shx' in descriptor && 'shy' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n        return Object(_shear__WEBPACK_IMPORTED_MODULE_5__[\"shear\"])(descriptor.shx, descriptor.shy)\n\n      default:\n        throw new Error('UNSUPPORTED_DESCRIPTOR')\n    }\n  }\n}\n\n\n//# sourceURL=webpack:///./node_modules/transformation-matrix/src/fromDefinition.js?");

/***/ }),

/***/ "./node_modules/transformation-matrix/src/fromObject.js":
/*!**************************************************************!*\
  !*** ./node_modules/transformation-matrix/src/fromObject.js ***!
  \**************************************************************/
/*! exports provided: fromObject */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"fromObject\", function() { return fromObject; });\n/**\n * Extract an affine matrix from an object that contains a,b,c,d,e,f keys\n * Any value could be a float or a string that contains a float\n * @param object {Object} Object that contains a,b,c,d,e,f keys\n * @return {Matrix} Affine Matrix\n */\nfunction fromObject (object) {\n  return {\n    a: parseFloat(object.a),\n    b: parseFloat(object.b),\n    c: parseFloat(object.c),\n    d: parseFloat(object.d),\n    e: parseFloat(object.e),\n    f: parseFloat(object.f)\n  }\n}\n\n\n//# sourceURL=webpack:///./node_modules/transformation-matrix/src/fromObject.js?");

/***/ }),

/***/ "./node_modules/transformation-matrix/src/fromString.js":
/*!**************************************************************!*\
  !*** ./node_modules/transformation-matrix/src/fromString.js ***!
  \**************************************************************/
/*! exports provided: fromString */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"fromString\", function() { return fromString; });\n/**\n * @ignore\n * @type {RegExp}\n */\nconst matrixRegex = /^matrix\\(\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*\\)$/i\n\n/**\n * Parse a string formatted as matrix(a,b,c,d,e,f)\n * @param string {string} String with an affine matrix\n * @returns {Matrix} Affine Matrix\n *\n * @example\n * > fromString('matrix(1,2,3,4,5,6)')\n * {a: 1, b: 2, c: 3, d: 4, c: 5, e: 6}\n */\nfunction fromString (string) {\n  const parsed = string.match(matrixRegex)\n  if (parsed === null || parsed.length < 7) throw new Error(`'${string}' is not a matrix`)\n  return {\n    a: parseFloat(parsed[1]),\n    b: parseFloat(parsed[2]),\n    c: parseFloat(parsed[3]),\n    d: parseFloat(parsed[4]),\n    e: parseFloat(parsed[5]),\n    f: parseFloat(parsed[6])\n  }\n}\n\n\n//# sourceURL=webpack:///./node_modules/transformation-matrix/src/fromString.js?");

/***/ }),

/***/ "./node_modules/transformation-matrix/src/fromTransformAttribute.autogenerated.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/transformation-matrix/src/fromTransformAttribute.autogenerated.js ***!
  \****************************************************************************************/
/*! exports provided: SyntaxError, parse, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SyntaxError\", function() { return peg$SyntaxError; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"parse\", function() { return peg$parse; });\n// Generated by PEG.js v0.11.0-master.30f3260, https://pegjs.org/\n\nfunction peg$subclass(child, parent) {\n  function C() { this.constructor = child; }\n  C.prototype = parent.prototype;\n  child.prototype = new C();\n}\n\nfunction peg$SyntaxError(message, expected, found, location) {\n  this.message = message;\n  this.expected = expected;\n  this.found = found;\n  this.location = location;\n  this.name = \"SyntaxError\";\n\n  // istanbul ignore next\n  if (typeof Error.captureStackTrace === \"function\") {\n    Error.captureStackTrace(this, peg$SyntaxError);\n  }\n}\n\npeg$subclass(peg$SyntaxError, Error);\n\npeg$SyntaxError.buildMessage = function(expected, found) {\n  var DESCRIBE_EXPECTATION_FNS = {\n    literal: function(expectation) {\n      return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n    },\n\n    class: function(expectation) {\n      var escapedParts = expectation.parts.map(function(part) {\n        return Array.isArray(part)\n          ? classEscape(part[0]) + \"-\" + classEscape(part[1])\n          : classEscape(part);\n      });\n\n      return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\n    },\n\n    any: function() {\n      return \"any character\";\n    },\n\n    end: function() {\n      return \"end of input\";\n    },\n\n    other: function(expectation) {\n      return expectation.description;\n    },\n\n    not: function(expectation) {\n      return \"not \" + describeExpectation(expectation.expected);\n    }\n  };\n\n  function hex(ch) {\n    return ch.charCodeAt(0).toString(16).toUpperCase();\n  }\n\n  function literalEscape(s) {\n    return s\n      .replace(/\\\\/g, \"\\\\\\\\\")\n      .replace(/\"/g,  \"\\\\\\\"\")\n      .replace(/\\0/g, \"\\\\0\")\n      .replace(/\\t/g, \"\\\\t\")\n      .replace(/\\n/g, \"\\\\n\")\n      .replace(/\\r/g, \"\\\\r\")\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return \"\\\\x0\" + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return \"\\\\x\"  + hex(ch); });\n  }\n\n  function classEscape(s) {\n    return s\n      .replace(/\\\\/g, \"\\\\\\\\\")\n      .replace(/\\]/g, \"\\\\]\")\n      .replace(/\\^/g, \"\\\\^\")\n      .replace(/-/g,  \"\\\\-\")\n      .replace(/\\0/g, \"\\\\0\")\n      .replace(/\\t/g, \"\\\\t\")\n      .replace(/\\n/g, \"\\\\n\")\n      .replace(/\\r/g, \"\\\\r\")\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return \"\\\\x0\" + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return \"\\\\x\"  + hex(ch); });\n  }\n\n  function describeExpectation(expectation) {\n    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\n  }\n\n  function describeExpected(expected) {\n    var descriptions = expected.map(describeExpectation);\n    var i, j;\n\n    descriptions.sort();\n\n    if (descriptions.length > 0) {\n      for (i = 1, j = 1; i < descriptions.length; i++) {\n        if (descriptions[i - 1] !== descriptions[i]) {\n          descriptions[j] = descriptions[i];\n          j++;\n        }\n      }\n      descriptions.length = j;\n    }\n\n    switch (descriptions.length) {\n      case 1:\n        return descriptions[0];\n\n      case 2:\n        return descriptions[0] + \" or \" + descriptions[1];\n\n      default:\n        return descriptions.slice(0, -1).join(\", \")\n          + \", or \"\n          + descriptions[descriptions.length - 1];\n    }\n  }\n\n  function describeFound(found) {\n    return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\n  }\n\n  return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n};\n\nfunction peg$parse(input, options) {\n  options = options !== undefined ? options : {};\n\n  var peg$FAILED = {};\n\n  var peg$startRuleFunctions = { transformList: peg$parsetransformList };\n  var peg$startRuleFunction = peg$parsetransformList;\n\n  var peg$c0 = \"matrix\";\n  var peg$c1 = \"(\";\n  var peg$c2 = \")\";\n  var peg$c3 = \"translate\";\n  var peg$c4 = \"scale\";\n  var peg$c5 = \"rotate\";\n  var peg$c6 = \"skewX\";\n  var peg$c7 = \"skewY\";\n  var peg$c8 = \",\";\n  var peg$c9 = \".\";\n\n  var peg$r0 = /^[eE]/;\n  var peg$r1 = /^[+\\-]/;\n  var peg$r2 = /^[0-9]/;\n  var peg$r3 = /^[ \\t\\r\\n]/;\n\n  var peg$e0 = peg$literalExpectation(\"matrix\", false);\n  var peg$e1 = peg$literalExpectation(\"(\", false);\n  var peg$e2 = peg$literalExpectation(\")\", false);\n  var peg$e3 = peg$literalExpectation(\"translate\", false);\n  var peg$e4 = peg$literalExpectation(\"scale\", false);\n  var peg$e5 = peg$literalExpectation(\"rotate\", false);\n  var peg$e6 = peg$literalExpectation(\"skewX\", false);\n  var peg$e7 = peg$literalExpectation(\"skewY\", false);\n  var peg$e8 = peg$literalExpectation(\",\", false);\n  var peg$e9 = peg$otherExpectation(\"fractionalConstant\");\n  var peg$e10 = peg$classExpectation([\"e\", \"E\"], false, false);\n  var peg$e11 = peg$classExpectation([\"+\", \"-\"], false, false);\n  var peg$e12 = peg$classExpectation([[\"0\", \"9\"]], false, false);\n  var peg$e13 = peg$classExpectation([\" \", \"\\t\", \"\\r\", \"\\n\"], false, false);\n\n  var peg$f0 = function(ts) { return ts; };\n  var peg$f1 = function(t, ts) { return t.concat(ts) };\n  var peg$f2 = function(a, b, c, d, e, f) {\n        return [{type: 'matrix', a: a, b: b, c: c, d: d, e: e, f: f}];\n      };\n  var peg$f3 = function(tx, ty) {\n        var t = {type: 'translate', tx: tx};\n        if (ty) t.ty = ty;\n        return [t];\n      };\n  var peg$f4 = function(sx, sy) {\n        var s = {type:'scale', sx: sx};\n        if (sy) s.sy = sy;\n        return [s];\n      };\n  var peg$f5 = function(angle, c) {\n        var r = {type:'rotate', angle: angle};\n        if (c) {\n          r.cx = c[0];\n          r.cy = c[1];\n        }\n        return [r];\n      };\n  var peg$f6 = function(angle) {\n        return [{type: 'skewX', angle: angle}];\n      };\n  var peg$f7 = function(angle) {\n        return [{type: 'skewY', angle: angle}];\n      };\n  var peg$f8 = function(f) { return parseFloat(f.join(\"\")); };\n  var peg$f9 = function(i) { return parseInt(i.join(\"\")); };\n  var peg$f10 = function(n) { return n; };\n  var peg$f11 = function(n1, n2) { return [n1, n2]; };\n  var peg$f12 = function(ds) { return ds.join(\"\"); };\n  var peg$f13 = function(d1, d2) { return [d1 ? d1.join(\"\") : null, \".\", d2.join(\"\")].join(\"\"); };\n  var peg$f14 = function(d) { return d.join(\"\"); };\n\n  var peg$currPos = 0;\n  var peg$savedPos = 0;\n  var peg$posDetailsCache = [{ line: 1, column: 1 }];\n  var peg$expected = [];\n  var peg$silentFails = 0;\n\n  var peg$result;\n\n  if (\"startRule\" in options) {\n    if (!(options.startRule in peg$startRuleFunctions)) {\n      throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n    }\n\n    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n  }\n\n  function text() {\n    return input.substring(peg$savedPos, peg$currPos);\n  }\n\n  function offset() {\n    return peg$savedPos;\n  }\n\n  function range() {\n    return [peg$savedPos, peg$currPos];\n  }\n\n  function location() {\n    return peg$computeLocation(peg$savedPos, peg$currPos);\n  }\n\n  function expected(description, location) {\n    location = location !== undefined\n      ? location\n      : peg$computeLocation(peg$savedPos, peg$currPos);\n\n    throw peg$buildStructuredError(\n      [peg$otherExpectation(description)],\n      input.substring(peg$savedPos, peg$currPos),\n      location\n    );\n  }\n\n  function error(message, location) {\n    location = location !== undefined\n      ? location\n      : peg$computeLocation(peg$savedPos, peg$currPos);\n\n    throw peg$buildSimpleError(message, location);\n  }\n\n  function peg$literalExpectation(text, ignoreCase) {\n    return { type: \"literal\", text: text, ignoreCase: ignoreCase };\n  }\n\n  function peg$classExpectation(parts, inverted, ignoreCase) {\n    return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n  }\n\n  function peg$anyExpectation() {\n    return { type: \"any\" };\n  }\n\n  function peg$endExpectation() {\n    return { type: \"end\" };\n  }\n\n  function peg$otherExpectation(description) {\n    return { type: \"other\", description: description };\n  }\n\n  function peg$computePosDetails(pos) {\n    var details = peg$posDetailsCache[pos];\n    var p;\n\n    if (details) {\n      return details;\n    } else {\n      p = pos - 1;\n      while (!peg$posDetailsCache[p]) {\n        p--;\n      }\n\n      details = peg$posDetailsCache[p];\n      details = {\n        line: details.line,\n        column: details.column\n      };\n\n      while (p < pos) {\n        if (input.charCodeAt(p) === 10) {\n          details.line++;\n          details.column = 1;\n        } else {\n          details.column++;\n        }\n\n        p++;\n      }\n\n      peg$posDetailsCache[pos] = details;\n\n      return details;\n    }\n  }\n\n  var peg$VALIDFILENAME = typeof options.filename === \"string\" && options.filename.length > 0;\n  function peg$computeLocation(startPos, endPos) {\n    var loc = {};\n\n    if ( peg$VALIDFILENAME ) loc.filename = options.filename;\n\n    var startPosDetails = peg$computePosDetails(startPos);\n    loc.start = {\n      offset: startPos,\n      line: startPosDetails.line,\n      column: startPosDetails.column\n    };\n\n    var endPosDetails = peg$computePosDetails(endPos);\n    loc.end = {\n      offset: endPos,\n      line: endPosDetails.line,\n      column: endPosDetails.column\n    };\n\n    return loc;\n  }\n\n  function peg$begin() {\n    peg$expected.push({ pos: peg$currPos, variants: [] });\n  }\n\n  function peg$expect(expected) {\n    var top = peg$expected[peg$expected.length - 1];\n\n    if (peg$currPos < top.pos) { return; }\n\n    if (peg$currPos > top.pos) {\n      top.pos = peg$currPos;\n      top.variants = [];\n    }\n\n    top.variants.push(expected);\n  }\n\n  function peg$end(invert) {\n    var expected = peg$expected.pop();\n    var top = peg$expected[peg$expected.length - 1];\n    var variants = expected.variants;\n\n    if (top.pos !== expected.pos) { return; }\n\n    if (invert) {\n      variants = variants.map(function(e) {\n        return e.type === \"not\" ? e.expected : { type: \"not\", expected: e };\n      });\n    }\n\n    Array.prototype.push.apply(top.variants, variants);\n  }\n\n  function peg$buildSimpleError(message, location) {\n    return new peg$SyntaxError(message, null, null, location);\n  }\n\n  function peg$buildStructuredError(expected, found, location) {\n    return new peg$SyntaxError(\n      peg$SyntaxError.buildMessage(expected, found),\n      expected,\n      found,\n      location\n    );\n  }\n\n  function peg$buildError() {\n    var expected = peg$expected[0];\n    var failPos = expected.pos;\n\n    return peg$buildStructuredError(\n      expected.variants,\n      failPos < input.length ? input.charAt(failPos) : null,\n      failPos < input.length\n        ? peg$computeLocation(failPos, failPos + 1)\n        : peg$computeLocation(failPos, failPos)\n    );\n  }\n\n  function peg$parsetransformList() {\n    var s0, s1, s2, s3, s4;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$parsewsp();\n    while (s2 !== peg$FAILED) {\n      s1.push(s2);\n      s2 = peg$parsewsp();\n    }\n    s2 = peg$parsetransforms();\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    s3 = [];\n    s4 = peg$parsewsp();\n    while (s4 !== peg$FAILED) {\n      s3.push(s4);\n      s4 = peg$parsewsp();\n    }\n    peg$savedPos = s0;\n    s0 = peg$f0(s2);\n\n    return s0;\n  }\n\n  function peg$parsetransforms() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsetransform();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsecommaWsp();\n      if (s3 !== peg$FAILED) {\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parsecommaWsp();\n        }\n      } else {\n        s2 = peg$FAILED;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsetransforms();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s0 = peg$f1(s1, s3);\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$parsetransform();\n    }\n\n    return s0;\n  }\n\n  function peg$parsetransform() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$parsematrix();\n    if (s0 === peg$FAILED) {\n      s0 = peg$parsetranslate();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsescale();\n        if (s0 === peg$FAILED) {\n          s0 = peg$parserotate();\n          if (s0 === peg$FAILED) {\n            s0 = peg$parseskewX();\n            if (s0 === peg$FAILED) {\n              s0 = peg$parseskewY();\n            }\n          }\n        }\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsematrix() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9, s10, s11, s12, s13, s14, s15, s16, s17;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e0);\n    if (input.substr(peg$currPos, 6) === peg$c0) {\n      s1 = peg$c0;\n      peg$currPos += 6;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWsp();\n          if (s6 !== peg$FAILED) {\n            s7 = peg$parsenumber();\n            if (s7 !== peg$FAILED) {\n              s8 = peg$parsecommaWsp();\n              if (s8 !== peg$FAILED) {\n                s9 = peg$parsenumber();\n                if (s9 !== peg$FAILED) {\n                  s10 = peg$parsecommaWsp();\n                  if (s10 !== peg$FAILED) {\n                    s11 = peg$parsenumber();\n                    if (s11 !== peg$FAILED) {\n                      s12 = peg$parsecommaWsp();\n                      if (s12 !== peg$FAILED) {\n                        s13 = peg$parsenumber();\n                        if (s13 !== peg$FAILED) {\n                          s14 = peg$parsecommaWsp();\n                          if (s14 !== peg$FAILED) {\n                            s15 = peg$parsenumber();\n                            if (s15 !== peg$FAILED) {\n                              s16 = [];\n                              s17 = peg$parsewsp();\n                              while (s17 !== peg$FAILED) {\n                                s16.push(s17);\n                                s17 = peg$parsewsp();\n                              }\n                              rule$expects(peg$e2);\n                              if (input.charCodeAt(peg$currPos) === 41) {\n                                s17 = peg$c2;\n                                peg$currPos++;\n                              } else {\n                                s17 = peg$FAILED;\n                              }\n                              if (s17 !== peg$FAILED) {\n                                peg$savedPos = s0;\n                                s0 = peg$f2(s5, s7, s9, s11, s13, s15);\n                              } else {\n                                peg$currPos = s0;\n                                s0 = peg$FAILED;\n                              }\n                            } else {\n                              peg$currPos = s0;\n                              s0 = peg$FAILED;\n                            }\n                          } else {\n                            peg$currPos = s0;\n                            s0 = peg$FAILED;\n                          }\n                        } else {\n                          peg$currPos = s0;\n                          s0 = peg$FAILED;\n                        }\n                      } else {\n                        peg$currPos = s0;\n                        s0 = peg$FAILED;\n                      }\n                    } else {\n                      peg$currPos = s0;\n                      s0 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsetranslate() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e3);\n    if (input.substr(peg$currPos, 9) === peg$c3) {\n      s1 = peg$c3;\n      peg$currPos += 9;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWspNumber();\n          if (s6 === peg$FAILED) {\n            s6 = null;\n          }\n          s7 = [];\n          s8 = peg$parsewsp();\n          while (s8 !== peg$FAILED) {\n            s7.push(s8);\n            s8 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s8 = peg$c2;\n            peg$currPos++;\n          } else {\n            s8 = peg$FAILED;\n          }\n          if (s8 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f3(s5, s6);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsescale() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e4);\n    if (input.substr(peg$currPos, 5) === peg$c4) {\n      s1 = peg$c4;\n      peg$currPos += 5;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWspNumber();\n          if (s6 === peg$FAILED) {\n            s6 = null;\n          }\n          s7 = [];\n          s8 = peg$parsewsp();\n          while (s8 !== peg$FAILED) {\n            s7.push(s8);\n            s8 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s8 = peg$c2;\n            peg$currPos++;\n          } else {\n            s8 = peg$FAILED;\n          }\n          if (s8 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f4(s5, s6);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parserotate() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e5);\n    if (input.substr(peg$currPos, 6) === peg$c5) {\n      s1 = peg$c5;\n      peg$currPos += 6;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWspTwoNumbers();\n          if (s6 === peg$FAILED) {\n            s6 = null;\n          }\n          s7 = [];\n          s8 = peg$parsewsp();\n          while (s8 !== peg$FAILED) {\n            s7.push(s8);\n            s8 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s8 = peg$c2;\n            peg$currPos++;\n          } else {\n            s8 = peg$FAILED;\n          }\n          if (s8 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f5(s5, s6);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseskewX() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e6);\n    if (input.substr(peg$currPos, 5) === peg$c6) {\n      s1 = peg$c6;\n      peg$currPos += 5;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = [];\n          s7 = peg$parsewsp();\n          while (s7 !== peg$FAILED) {\n            s6.push(s7);\n            s7 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s7 = peg$c2;\n            peg$currPos++;\n          } else {\n            s7 = peg$FAILED;\n          }\n          if (s7 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f6(s5);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseskewY() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e7);\n    if (input.substr(peg$currPos, 5) === peg$c7) {\n      s1 = peg$c7;\n      peg$currPos += 5;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = [];\n          s7 = peg$parsewsp();\n          while (s7 !== peg$FAILED) {\n            s6.push(s7);\n            s7 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s7 = peg$c2;\n            peg$currPos++;\n          } else {\n            s7 = peg$FAILED;\n          }\n          if (s7 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f7(s5);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsenumber() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    s2 = peg$parsesign();\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    s3 = peg$parsefloatingPointConstant();\n    if (s3 !== peg$FAILED) {\n      s2 = [s2, s3];\n      s1 = s2;\n    } else {\n      peg$currPos = s1;\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$f8(s1);\n    }\n    s0 = s1;\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      s2 = peg$parsesign();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s3 = peg$parseintegerConstant();\n      if (s3 !== peg$FAILED) {\n        s2 = [s2, s3];\n        s1 = s2;\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$f9(s1);\n      }\n      s0 = s1;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecommaWspNumber() {\n    var s0, s1, s2;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsecommaWsp();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsenumber();\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s0 = peg$f10(s2);\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecommaWspTwoNumbers() {\n    var s0, s1, s2, s3, s4;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsecommaWsp();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsenumber();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecommaWsp();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parsenumber();\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f11(s2, s4);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecommaWsp() {\n    var s0, s1, s2, s3, s4;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$parsewsp();\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parsewsp();\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s3 = [];\n      s4 = peg$parsewsp();\n      while (s4 !== peg$FAILED) {\n        s3.push(s4);\n        s4 = peg$parsewsp();\n      }\n      s1 = [s1, s2, s3];\n      s0 = s1;\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsecomma();\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$parsewsp();\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parsewsp();\n        }\n        s1 = [s1, s2];\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsecomma() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e8);\n    if (input.charCodeAt(peg$currPos) === 44) {\n      s0 = peg$c8;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseintegerConstant() {\n    var s0, s1;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsedigitSequence();\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$f12(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsefloatingPointConstant() {\n    var s0, s1, s2;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsefractionalConstant();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseexponent();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s1 = [s1, s2];\n      s0 = s1;\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsedigitSequence();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseexponent();\n        if (s2 !== peg$FAILED) {\n          s1 = [s1, s2];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsefractionalConstant() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e9);\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parsedigitSequence();\n    if (s1 === peg$FAILED) {\n      s1 = null;\n    }\n    if (input.charCodeAt(peg$currPos) === 46) {\n      s2 = peg$c9;\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = peg$parsedigitSequence();\n      if (s3 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s0 = peg$f13(s1, s3);\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsedigitSequence();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 46) {\n          s2 = peg$c9;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s0 = peg$f14(s1);\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n    peg$silentFails--;\n\n    return s0;\n  }\n\n  function peg$parseexponent() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e10);\n    if (peg$r0.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsesign();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s3 = peg$parsedigitSequence();\n      if (s3 !== peg$FAILED) {\n        s1 = [s1, s2, s3];\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsesign() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e11);\n    if (peg$r1.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsedigitSequence() {\n    var s0, s1;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = [];\n    s1 = peg$parsedigit();\n    if (s1 !== peg$FAILED) {\n      while (s1 !== peg$FAILED) {\n        s0.push(s1);\n        s1 = peg$parsedigit();\n      }\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsedigit() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e12);\n    if (peg$r2.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsewsp() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e13);\n    if (peg$r3.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  peg$begin();\n  peg$result = peg$startRuleFunction();\n\n  if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n    return peg$result;\n  } else {\n    if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n      peg$expect(peg$endExpectation());\n    }\n\n    throw peg$buildError();\n  }\n}\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  SyntaxError: peg$SyntaxError,\n  parse: peg$parse\n});\n\n\n//# sourceURL=webpack:///./node_modules/transformation-matrix/src/fromTransformAttribute.autogenerated.js?");

/***/ }),

/***/ "./node_modules/transformation-matrix/src/fromTransformAttribute.js":
/*!**************************************************************************!*\
  !*** ./node_modules/transformation-matrix/src/fromTransformAttribute.js ***!
  \**************************************************************************/
/*! exports provided: fromTransformAttribute */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"fromTransformAttribute\", function() { return fromTransformAttribute; });\n/* harmony import */ var _fromTransformAttribute_autogenerated__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./fromTransformAttribute.autogenerated */ \"./node_modules/transformation-matrix/src/fromTransformAttribute.autogenerated.js\");\n\n\n/**\n * Parser for SVG Trasform Attribute http://www.w3.org/TR/SVG/coords.html#TransformAttribute <br/>\n * Warning: This should be considered BETA until it is released a stable version of pegjs.\n * @param transformString {string} Transform string as defined by w3 Consortium\n * @returns {MatrixDescriptor[]} Array of MatrixDescriptor\n *\n * @example\n * > fromTransformAttribute('translate(-10,-10) scale(2,2) translate(10,10)')\n * [\n *  { type: 'translate', tx: -10, ty: -10},\n *  { type: 'scale', sx: 2, sy: 2 },\n *  { type: 'translate', tx: 10, ty: 10}\n * ]\n *\n * > compose(fromDefinition(fromTransformAttribute('translate(-10, -10) scale(10, 10)')))\n * { a: 10, c: 0, e: -10, b: 0, d: 10, f: -10 }\n */\nfunction fromTransformAttribute (transformString) {\n  return Object(_fromTransformAttribute_autogenerated__WEBPACK_IMPORTED_MODULE_0__[\"parse\"])(transformString)\n}\n\n\n//# sourceURL=webpack:///./node_modules/transformation-matrix/src/fromTransformAttribute.js?");

/***/ }),

/***/ "./node_modules/transformation-matrix/src/fromTriangles.js":
/*!*****************************************************************!*\
  !*** ./node_modules/transformation-matrix/src/fromTriangles.js ***!
  \*****************************************************************/
/*! exports provided: fromTriangles */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"fromTriangles\", function() { return fromTriangles; });\n/* harmony import */ var _inverse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./inverse */ \"./node_modules/transformation-matrix/src/inverse.js\");\n/* harmony import */ var _transform__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./transform */ \"./node_modules/transformation-matrix/src/transform.js\");\n/* harmony import */ var _smoothMatrix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./smoothMatrix */ \"./node_modules/transformation-matrix/src/smoothMatrix.js\");\n\n\n\n\n/**\n * Returns a matrix that transforms a triangle t1 into another triangle t2, or throws an exception if it is impossible.\n * @param t1 {Point[]} Array of points containing the three points for the first triangle\n * @param t2 {Point[]} Array of points containing the three points for the second triangle\n * @returns {Matrix} Matrix which transforms t1 to t2\n * @throws Exception if the matrix becomes not invertible\n */\nfunction fromTriangles (t1, t2) {\n  // point p = first point of the triangle\n  const px1 = t1[0].x != null ? t1[0].x : t1[0][0]\n  const py1 = t1[0].y != null ? t1[0].y : t1[0][1]\n  const px2 = t2[0].x != null ? t2[0].x : t2[0][0]\n  const py2 = t2[0].y != null ? t2[0].y : t2[0][1]\n\n  // point q = second point of the triangle\n  const qx1 = t1[1].x != null ? t1[1].x : t1[1][0]\n  const qy1 = t1[1].y != null ? t1[1].y : t1[1][1]\n  const qx2 = t2[1].x != null ? t2[1].x : t2[1][0]\n  const qy2 = t2[1].y != null ? t2[1].y : t2[1][1]\n\n  // point r = third point of the triangle\n  const rx1 = t1[2].x != null ? t1[2].x : t1[2][0]\n  const ry1 = t1[2].y != null ? t1[2].y : t1[2][1]\n  const rx2 = t2[2].x != null ? t2[2].x : t2[2][0]\n  const ry2 = t2[2].y != null ? t2[2].y : t2[2][1]\n\n  const r1 = {\n    a: px1 - rx1,\n    b: py1 - ry1,\n    c: qx1 - rx1,\n    d: qy1 - ry1,\n    e: rx1,\n    f: ry1\n  }\n  const r2 = {\n    a: px2 - rx2,\n    b: py2 - ry2,\n    c: qx2 - rx2,\n    d: qy2 - ry2,\n    e: rx2,\n    f: ry2\n  }\n\n  const inverseR1 = Object(_inverse__WEBPACK_IMPORTED_MODULE_0__[\"inverse\"])(r1)\n  const affineMatrix = Object(_transform__WEBPACK_IMPORTED_MODULE_1__[\"transform\"])([r2, inverseR1])\n\n  // round the matrix elements to smooth the finite inversion\n  return Object(_smoothMatrix__WEBPACK_IMPORTED_MODULE_2__[\"smoothMatrix\"])(affineMatrix)\n}\n\n\n//# sourceURL=webpack:///./node_modules/transformation-matrix/src/fromTriangles.js?");

/***/ }),

/***/ "./node_modules/transformation-matrix/src/identity.js":
/*!************************************************************!*\
  !*** ./node_modules/transformation-matrix/src/identity.js ***!
  \************************************************************/
/*! exports provided: identity */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"identity\", function() { return identity; });\n/**\n * Identity matrix\n * @returns {Matrix} Affine Matrix\n */\nfunction identity () {\n  return {\n    a: 1,\n    c: 0,\n    e: 0,\n    b: 0,\n    d: 1,\n    f: 0\n  }\n}\n\n\n//# sourceURL=webpack:///./node_modules/transformation-matrix/src/identity.js?");

/***/ }),

/***/ "./node_modules/transformation-matrix/src/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/transformation-matrix/src/index.js ***!
  \*********************************************************/
/*! exports provided: applyToPoint, applyToPoints, fromObject, fromString, identity, inverse, isAffineMatrix, rotate, rotateDEG, scale, shear, skew, skewDEG, toCSS, toSVG, toString, transform, compose, translate, fromTriangles, smoothMatrix, fromDefinition, fromTransformAttribute */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _applyToPoint__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./applyToPoint */ \"./node_modules/transformation-matrix/src/applyToPoint.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"applyToPoint\", function() { return _applyToPoint__WEBPACK_IMPORTED_MODULE_0__[\"applyToPoint\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"applyToPoints\", function() { return _applyToPoint__WEBPACK_IMPORTED_MODULE_0__[\"applyToPoints\"]; });\n\n/* harmony import */ var _fromObject__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./fromObject */ \"./node_modules/transformation-matrix/src/fromObject.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"fromObject\", function() { return _fromObject__WEBPACK_IMPORTED_MODULE_1__[\"fromObject\"]; });\n\n/* harmony import */ var _fromString__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./fromString */ \"./node_modules/transformation-matrix/src/fromString.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"fromString\", function() { return _fromString__WEBPACK_IMPORTED_MODULE_2__[\"fromString\"]; });\n\n/* harmony import */ var _identity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./identity */ \"./node_modules/transformation-matrix/src/identity.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"identity\", function() { return _identity__WEBPACK_IMPORTED_MODULE_3__[\"identity\"]; });\n\n/* harmony import */ var _inverse__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./inverse */ \"./node_modules/transformation-matrix/src/inverse.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"inverse\", function() { return _inverse__WEBPACK_IMPORTED_MODULE_4__[\"inverse\"]; });\n\n/* harmony import */ var _isAffineMatrix__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./isAffineMatrix */ \"./node_modules/transformation-matrix/src/isAffineMatrix.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"isAffineMatrix\", function() { return _isAffineMatrix__WEBPACK_IMPORTED_MODULE_5__[\"isAffineMatrix\"]; });\n\n/* harmony import */ var _rotate__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./rotate */ \"./node_modules/transformation-matrix/src/rotate.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"rotate\", function() { return _rotate__WEBPACK_IMPORTED_MODULE_6__[\"rotate\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"rotateDEG\", function() { return _rotate__WEBPACK_IMPORTED_MODULE_6__[\"rotateDEG\"]; });\n\n/* harmony import */ var _scale__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./scale */ \"./node_modules/transformation-matrix/src/scale.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"scale\", function() { return _scale__WEBPACK_IMPORTED_MODULE_7__[\"scale\"]; });\n\n/* harmony import */ var _shear__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./shear */ \"./node_modules/transformation-matrix/src/shear.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"shear\", function() { return _shear__WEBPACK_IMPORTED_MODULE_8__[\"shear\"]; });\n\n/* harmony import */ var _skew__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./skew */ \"./node_modules/transformation-matrix/src/skew.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"skew\", function() { return _skew__WEBPACK_IMPORTED_MODULE_9__[\"skew\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"skewDEG\", function() { return _skew__WEBPACK_IMPORTED_MODULE_9__[\"skewDEG\"]; });\n\n/* harmony import */ var _toString__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./toString */ \"./node_modules/transformation-matrix/src/toString.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"toCSS\", function() { return _toString__WEBPACK_IMPORTED_MODULE_10__[\"toCSS\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"toSVG\", function() { return _toString__WEBPACK_IMPORTED_MODULE_10__[\"toSVG\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"toString\", function() { return _toString__WEBPACK_IMPORTED_MODULE_10__[\"toString\"]; });\n\n/* harmony import */ var _transform__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./transform */ \"./node_modules/transformation-matrix/src/transform.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"transform\", function() { return _transform__WEBPACK_IMPORTED_MODULE_11__[\"transform\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"compose\", function() { return _transform__WEBPACK_IMPORTED_MODULE_11__[\"compose\"]; });\n\n/* harmony import */ var _translate__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./translate */ \"./node_modules/transformation-matrix/src/translate.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"translate\", function() { return _translate__WEBPACK_IMPORTED_MODULE_12__[\"translate\"]; });\n\n/* harmony import */ var _fromTriangles__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./fromTriangles */ \"./node_modules/transformation-matrix/src/fromTriangles.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"fromTriangles\", function() { return _fromTriangles__WEBPACK_IMPORTED_MODULE_13__[\"fromTriangles\"]; });\n\n/* harmony import */ var _smoothMatrix__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./smoothMatrix */ \"./node_modules/transformation-matrix/src/smoothMatrix.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"smoothMatrix\", function() { return _smoothMatrix__WEBPACK_IMPORTED_MODULE_14__[\"smoothMatrix\"]; });\n\n/* harmony import */ var _fromDefinition__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./fromDefinition */ \"./node_modules/transformation-matrix/src/fromDefinition.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"fromDefinition\", function() { return _fromDefinition__WEBPACK_IMPORTED_MODULE_15__[\"fromDefinition\"]; });\n\n/* harmony import */ var _fromTransformAttribute__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./fromTransformAttribute */ \"./node_modules/transformation-matrix/src/fromTransformAttribute.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"fromTransformAttribute\", function() { return _fromTransformAttribute__WEBPACK_IMPORTED_MODULE_16__[\"fromTransformAttribute\"]; });\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=webpack:///./node_modules/transformation-matrix/src/index.js?");

/***/ }),

/***/ "./node_modules/transformation-matrix/src/inverse.js":
/*!***********************************************************!*\
  !*** ./node_modules/transformation-matrix/src/inverse.js ***!
  \***********************************************************/
/*! exports provided: inverse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"inverse\", function() { return inverse; });\n/**\n * Calculate a matrix that is the inverse of the provided matrix\n * @param matrix {Matrix} Affine Matrix\n * @returns {Matrix} Inverted Affine Matrix\n */\nfunction inverse (matrix) {\n  // http://www.wolframalpha.com/input/?i=Inverse+%5B%7B%7Ba,c,e%7D,%7Bb,d,f%7D,%7B0,0,1%7D%7D%5D\n\n  const { a, b, c, d, e, f } = matrix\n\n  const denom = a * d - b * c\n\n  return {\n    a: d / denom,\n    b: b / -denom,\n    c: c / -denom,\n    d: a / denom,\n    e: (d * e - c * f) / -denom,\n    f: (b * e - a * f) / denom\n  }\n}\n\n\n//# sourceURL=webpack:///./node_modules/transformation-matrix/src/inverse.js?");

/***/ }),

/***/ "./node_modules/transformation-matrix/src/isAffineMatrix.js":
/*!******************************************************************!*\
  !*** ./node_modules/transformation-matrix/src/isAffineMatrix.js ***!
  \******************************************************************/
/*! exports provided: isAffineMatrix */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isAffineMatrix\", function() { return isAffineMatrix; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./node_modules/transformation-matrix/src/utils.js\");\n\n\n/**\n * Check if the object contain an affine matrix\n * @param object {Object} Generic Plain Object\n * @return {boolean} True if is an object and contains an affine matrix\n */\n\nfunction isAffineMatrix (object) {\n  return Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"isObject\"])(object) &&\n    'a' in object &&\n    Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"isNumeric\"])(object.a) &&\n    'b' in object &&\n    Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"isNumeric\"])(object.b) &&\n    'c' in object &&\n    Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"isNumeric\"])(object.c) &&\n    'd' in object &&\n    Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"isNumeric\"])(object.d) &&\n    'e' in object &&\n    Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"isNumeric\"])(object.e) &&\n    'f' in object &&\n    Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"isNumeric\"])(object.f)\n}\n\n\n//# sourceURL=webpack:///./node_modules/transformation-matrix/src/isAffineMatrix.js?");

/***/ }),

/***/ "./node_modules/transformation-matrix/src/rotate.js":
/*!**********************************************************!*\
  !*** ./node_modules/transformation-matrix/src/rotate.js ***!
  \**********************************************************/
/*! exports provided: rotate, rotateDEG */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"rotate\", function() { return rotate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"rotateDEG\", function() { return rotateDEG; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./node_modules/transformation-matrix/src/utils.js\");\n/* harmony import */ var _translate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./translate */ \"./node_modules/transformation-matrix/src/translate.js\");\n/* harmony import */ var _transform__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./transform */ \"./node_modules/transformation-matrix/src/transform.js\");\n\n\n\n\nconst { cos, sin, PI } = Math\n/**\n * Calculate a rotation matrix\n * @param angle {number} Angle in radians\n * @param [cx] {number} If (cx,cy) are supplied the rotate is about this point\n * @param [cy] {number} If (cx,cy) are supplied the rotate is about this point\n * @returns {Matrix} Affine Matrix\n */\nfunction rotate (angle, cx, cy) {\n  const cosAngle = cos(angle)\n  const sinAngle = sin(angle)\n  const rotationMatrix = {\n    a: cosAngle,\n    c: -sinAngle,\n    e: 0,\n    b: sinAngle,\n    d: cosAngle,\n    f: 0\n  }\n  if (Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"isUndefined\"])(cx) || Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"isUndefined\"])(cy)) {\n    return rotationMatrix\n  }\n\n  return Object(_transform__WEBPACK_IMPORTED_MODULE_2__[\"transform\"])([\n    Object(_translate__WEBPACK_IMPORTED_MODULE_1__[\"translate\"])(cx, cy),\n    rotationMatrix,\n    Object(_translate__WEBPACK_IMPORTED_MODULE_1__[\"translate\"])(-cx, -cy)\n  ])\n}\n\n/**\n * Calculate a rotation matrix with a DEG angle\n * @param angle {number} Angle in degree\n * @param [cx] {number} If (cx,cy) are supplied the rotate is about this point\n * @param [cy] {number} If (cx,cy) are supplied the rotate is about this point\n * @returns {Matrix} Affine Matrix\n */\nfunction rotateDEG (angle, cx = undefined, cy = undefined) {\n  return rotate(angle * PI / 180, cx, cy)\n}\n\n\n//# sourceURL=webpack:///./node_modules/transformation-matrix/src/rotate.js?");

/***/ }),

/***/ "./node_modules/transformation-matrix/src/scale.js":
/*!*********************************************************!*\
  !*** ./node_modules/transformation-matrix/src/scale.js ***!
  \*********************************************************/
/*! exports provided: scale */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"scale\", function() { return scale; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./node_modules/transformation-matrix/src/utils.js\");\n/* harmony import */ var _translate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./translate */ \"./node_modules/transformation-matrix/src/translate.js\");\n/* harmony import */ var _transform__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./transform */ \"./node_modules/transformation-matrix/src/transform.js\");\n\n\n\n\n/**\n * Calculate a scaling matrix\n * @param sx {number} Scaling on axis x\n * @param [sy = sx] {number} Scaling on axis y (default sx)\n * @param [cx] {number} If (cx,cy) are supplied the scaling is about this point\n * @param [cy] {number} If (cx,cy) are supplied the scaling is about this point\n * @returns {Matrix} Affine Matrix\n */\nfunction scale (sx, sy = undefined, cx = undefined, cy = undefined) {\n  if (Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"isUndefined\"])(sy)) sy = sx\n\n  const scaleMatrix = {\n    a: sx,\n    c: 0,\n    e: 0,\n    b: 0,\n    d: sy,\n    f: 0\n  }\n\n  if (Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"isUndefined\"])(cx) || Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"isUndefined\"])(cy)) {\n    return scaleMatrix\n  }\n\n  return Object(_transform__WEBPACK_IMPORTED_MODULE_2__[\"transform\"])([\n    Object(_translate__WEBPACK_IMPORTED_MODULE_1__[\"translate\"])(cx, cy),\n    scaleMatrix,\n    Object(_translate__WEBPACK_IMPORTED_MODULE_1__[\"translate\"])(-cx, -cy)\n  ])\n}\n\n\n//# sourceURL=webpack:///./node_modules/transformation-matrix/src/scale.js?");

/***/ }),

/***/ "./node_modules/transformation-matrix/src/shear.js":
/*!*********************************************************!*\
  !*** ./node_modules/transformation-matrix/src/shear.js ***!
  \*********************************************************/
/*! exports provided: shear */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shear\", function() { return shear; });\n/**\n * Calculate a shear matrix\n * @param shx {number} Shear on axis x\n * @param shy {number} Shear on axis y\n * @returns {Matrix} Affine Matrix\n */\nfunction shear (shx, shy) {\n  return {\n    a: 1,\n    c: shx,\n    e: 0,\n    b: shy,\n    d: 1,\n    f: 0\n  }\n}\n\n\n//# sourceURL=webpack:///./node_modules/transformation-matrix/src/shear.js?");

/***/ }),

/***/ "./node_modules/transformation-matrix/src/skew.js":
/*!********************************************************!*\
  !*** ./node_modules/transformation-matrix/src/skew.js ***!
  \********************************************************/
/*! exports provided: skew, skewDEG */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"skew\", function() { return skew; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"skewDEG\", function() { return skewDEG; });\n// https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/skew\nconst { tan } = Math\n\n/**\n * Calculate a skew matrix\n * @param ax {number} Skew on axis x\n * @param ay {number} Skew on axis y\n * @returns {Matrix} Affine Matrix\n */\nfunction skew (ax, ay) {\n  return {\n    a: 1,\n    c: tan(ax),\n    e: 0,\n    b: tan(ay),\n    d: 1,\n    f: 0\n  }\n}\n\n/**\n * Calculate a skew matrix using DEG angles\n * @param ax {number} Skew on axis x\n * @param ay {number} Skew on axis y\n * @returns {Matrix} Affine Matrix\n */\nfunction skewDEG (ax, ay) {\n  return skew(ax * Math.PI / 180, ay * Math.PI / 180)\n}\n\n\n//# sourceURL=webpack:///./node_modules/transformation-matrix/src/skew.js?");

/***/ }),

/***/ "./node_modules/transformation-matrix/src/smoothMatrix.js":
/*!****************************************************************!*\
  !*** ./node_modules/transformation-matrix/src/smoothMatrix.js ***!
  \****************************************************************/
/*! exports provided: smoothMatrix */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"smoothMatrix\", function() { return smoothMatrix; });\n/**\n * Rounds all elements of the given matrix using the given precision\n * @param matrix {Matrix} An affine matrix to round\n * @param [precision] {number} A precision to use for Math.round. Defaults to 10000000000 (meaning which rounds to the 10th digit after the comma).\n * @returns {Matrix} The rounded Affine Matrix\n */\nfunction smoothMatrix (matrix, precision = 10000000000) {\n  return {\n    a: Math.round(matrix.a * precision) / precision,\n    b: Math.round(matrix.b * precision) / precision,\n    c: Math.round(matrix.c * precision) / precision,\n    d: Math.round(matrix.d * precision) / precision,\n    e: Math.round(matrix.e * precision) / precision,\n    f: Math.round(matrix.f * precision) / precision\n  }\n}\n\n\n//# sourceURL=webpack:///./node_modules/transformation-matrix/src/smoothMatrix.js?");

/***/ }),

/***/ "./node_modules/transformation-matrix/src/toString.js":
/*!************************************************************!*\
  !*** ./node_modules/transformation-matrix/src/toString.js ***!
  \************************************************************/
/*! exports provided: toCSS, toSVG, toString */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"toCSS\", function() { return toCSS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"toSVG\", function() { return toSVG; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"toString\", function() { return toString; });\n/**\n * Serialize an affine matrix to a string that can be used with CSS or SVG\n * @param matrix {Matrix} Affine Matrix\n * @returns {string} String that contains an affine matrix formatted as matrix(a,b,c,d,e,f)\n */\nfunction toCSS (matrix) {\n  return toString(matrix)\n}\n\n/**\n * Serialize an affine matrix to a string that can be used with CSS or SVG\n * @param matrix {Matrix} Affine Matrix\n * @returns {string} String that contains an affine matrix formatted as matrix(a,b,c,d,e,f)\n */\nfunction toSVG (matrix) {\n  return toString(matrix)\n}\n\n/**\n * Serialize an affine matrix to a string that can be used with CSS or SVG\n * @param matrix {Matrix} Affine Matrix\n * @returns {string} String that contains an affine matrix formatted as matrix(a,b,c,d,e,f)\n */\nfunction toString (matrix) {\n  return `matrix(${matrix.a},${matrix.b},${matrix.c},${matrix.d},${matrix.e},${matrix.f})`\n}\n\n\n//# sourceURL=webpack:///./node_modules/transformation-matrix/src/toString.js?");

/***/ }),

/***/ "./node_modules/transformation-matrix/src/transform.js":
/*!*************************************************************!*\
  !*** ./node_modules/transformation-matrix/src/transform.js ***!
  \*************************************************************/
/*! exports provided: transform, compose */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"transform\", function() { return transform; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"compose\", function() { return compose; });\n/**\n * Merge multiple matrices into one\n * @param matrices {...Matrix | Matrix[]} Matrices listed as separate parameters or in an array\n * @returns {Matrix} Affine Matrix\n */\nfunction transform (...matrices) {\n  matrices = Array.isArray(matrices[0]) ? matrices[0] : matrices\n\n  const multiply = (m1, m2) => {\n    return {\n      a: m1.a * m2.a + m1.c * m2.b,\n      c: m1.a * m2.c + m1.c * m2.d,\n      e: m1.a * m2.e + m1.c * m2.f + m1.e,\n      b: m1.b * m2.a + m1.d * m2.b,\n      d: m1.b * m2.c + m1.d * m2.d,\n      f: m1.b * m2.e + m1.d * m2.f + m1.f\n    }\n  }\n\n  switch (matrices.length) {\n    case 0:\n      throw new Error('no matrices provided')\n\n    case 1:\n      return matrices[0]\n\n    case 2:\n      return multiply(matrices[0], matrices[1])\n\n    default: {\n      const [m1, m2, ...rest] = matrices\n      const m = multiply(m1, m2)\n      return transform(m, ...rest)\n    }\n  }\n}\n\n/**\n * Merge multiple matrices into one\n * @param matrices {...Matrix | Matrix[]} Matrices listed as separate parameters or in an array\n * @returns {Matrix} Affine Matrix\n */\nfunction compose (...matrices) {\n  return transform(...matrices)\n}\n\n\n//# sourceURL=webpack:///./node_modules/transformation-matrix/src/transform.js?");

/***/ }),

/***/ "./node_modules/transformation-matrix/src/translate.js":
/*!*************************************************************!*\
  !*** ./node_modules/transformation-matrix/src/translate.js ***!
  \*************************************************************/
/*! exports provided: translate */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"translate\", function() { return translate; });\n/**\n * Calculate a translate matrix\n * @param tx {number} Translation on axis x\n * @param [ty = 0] {number} Translation on axis y\n * @returns {Matrix} Affine Matrix\n */\nfunction translate (tx, ty = 0) {\n  return {\n    a: 1,\n    c: 0,\n    e: tx,\n    b: 0,\n    d: 1,\n    f: ty\n  }\n}\n\n\n//# sourceURL=webpack:///./node_modules/transformation-matrix/src/translate.js?");

/***/ }),

/***/ "./node_modules/transformation-matrix/src/utils.js":
/*!*********************************************************!*\
  !*** ./node_modules/transformation-matrix/src/utils.js ***!
  \*********************************************************/
/*! exports provided: isUndefined, isNumeric, isObject, matchesShape */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isUndefined\", function() { return isUndefined; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isNumeric\", function() { return isNumeric; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isObject\", function() { return isObject; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"matchesShape\", function() { return matchesShape; });\nfunction isUndefined (val) {\n  return typeof val === 'undefined'\n}\n\nfunction isNumeric (n) {\n  return typeof n === 'number' &&\n    !Number.isNaN(n) &&\n    Number.isFinite(n)\n}\n\nfunction isObject (obj) {\n  return typeof obj === 'object' &&\n    obj !== null &&\n    !Array.isArray(obj)\n}\n\nfunction matchesShape (obj, keys) {\n  return keys.every(key => key in obj)\n}\n\n\n//# sourceURL=webpack:///./node_modules/transformation-matrix/src/utils.js?");

/***/ }),

/***/ "./src/Camera.ts":
/*!***********************!*\
  !*** ./src/Camera.ts ***!
  \***********************/
/*! exports provided: Camera, toArrayMatrix */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Camera\", function() { return Camera; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"toArrayMatrix\", function() { return toArrayMatrix; });\n/* harmony import */ var transformation_matrix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! transformation-matrix */ \"./node_modules/transformation-matrix/src/index.js\");\n\nvar Camera = /** @class */ (function () {\n    function Camera(options) {\n        var _a = options.x, x = _a === void 0 ? 0 : _a, _b = options.y, y = _b === void 0 ? 0 : _b, _c = options.scale, scale = _c === void 0 ? 1 : _c;\n        this.setCanvasDimensions(options.canvasWidth, options.canvasHeight);\n        this.move(x, y, scale);\n        this.trackingTightness = 0.8;\n        this.track = null;\n    }\n    Camera.prototype.move = function (x, y, s) {\n        if (s === void 0) { s = this.scale; }\n        this.x = x;\n        this.y = y;\n        this.scale = s;\n        this.matrix = Object(transformation_matrix__WEBPACK_IMPORTED_MODULE_0__[\"compose\"])(Object(transformation_matrix__WEBPACK_IMPORTED_MODULE_0__[\"translate\"])(this.canvasWidth / 2, this.canvasHeight / 2), Object(transformation_matrix__WEBPACK_IMPORTED_MODULE_0__[\"scale\"])(s), Object(transformation_matrix__WEBPACK_IMPORTED_MODULE_0__[\"translate\"])(-x, -y));\n    };\n    Camera.prototype.tick = function (gamestate, io) {\n        if (this.track) {\n            console.log('tracking');\n            var e = gamestate.entities[this.track];\n            if (!e || !e.position)\n                this.track = null;\n            else\n                this.move(this.x + (e.position.x - this.x) * this.trackingTightness, this.y + (e.position.y - this.y) * this.trackingTightness);\n        }\n    };\n    Object.defineProperty(Camera.prototype, \"arrayMatrix\", {\n        get: function () {\n            return toArrayMatrix(this.matrix);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Camera.prototype.setCanvasDimensions = function (w, h) {\n        this.canvasWidth = w;\n        this.canvasHeight = h;\n    };\n    return Camera;\n}());\n\nfunction toArrayMatrix(matrix) {\n    return [\n        matrix.a,\n        matrix.b,\n        matrix.c,\n        matrix.d,\n        matrix.e,\n        matrix.f,\n    ];\n}\n\n\n//# sourceURL=webpack:///./src/Camera.ts?");

/***/ }),

/***/ "./src/EntityComponentSystem.ts":
/*!**************************************!*\
  !*** ./src/EntityComponentSystem.ts ***!
  \**************************************/
/*! exports provided: mergeGameStateUpdates, EntityComponentSystem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"mergeGameStateUpdates\", function() { return mergeGameStateUpdates; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EntityComponentSystem\", function() { return EntityComponentSystem; });\n/* harmony import */ var _GamestateTracker__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GamestateTracker */ \"./src/GamestateTracker.ts\");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util */ \"./src/util.ts\");\n\n\nfunction mergeGameStateUpdates(a, b) {\n    // if(b.create) {\n    //     if(a.create)\n    //         a.create.push(...b.create);\n    //     else\n    //         a.create = [...b.create];\n    // }\n    for (var id in b) {\n        if (b[id] === null) {\n            a[id] = b[id];\n        }\n        if (a[id] !== undefined)\n            // WARNING: Could run into shared memory problems with this.\n            a[id] = Object(_util__WEBPACK_IMPORTED_MODULE_1__[\"deepAssign\"])(a[id], b[id]);\n        else\n            a[id] = b[id];\n    }\n}\n;\nvar EntityComponentSystem = /** @class */ (function () {\n    function EntityComponentSystem(_a) {\n        var initialState = _a.initialState, systems = _a.systems;\n        this.stateTracker = new _GamestateTracker__WEBPACK_IMPORTED_MODULE_0__[\"GameStateTracker\"](initialState);\n        this.checkSystems(systems);\n        this.systems = systems;\n        for (var _i = 0, systems_1 = systems; _i < systems_1.length; _i++) {\n            var system = systems_1[_i];\n            for (var _b = 0, _c = system.reads; _b < _c.length; _b++) {\n                var components = _c[_b];\n                this.stateTracker.addGroup(components);\n            }\n        }\n    }\n    EntityComponentSystem.prototype.advanceState = function (io) {\n        var _this = this;\n        var stateUpdate = {};\n        // Loop through the systems,\n        for (var _i = 0, _a = this.systems; _i < _a.length; _i++) {\n            var system = _a[_i];\n            // Select groups\n            var groups = system.groupNames.map(function (groupName) { return _this.stateTracker.fetchGroupState(groupName); });\n            // Apply behaviour to the matches\n            var groupUpdate = system.behaviour(groups, io);\n            if (groupUpdate != undefined) {\n                // console.log(system.constructor.name, groupUpdate)\n                this.stateTracker.modifyState(groupUpdate);\n                mergeGameStateUpdates(stateUpdate, groupUpdate);\n            }\n        }\n        return stateUpdate;\n    };\n    Object.defineProperty(EntityComponentSystem.prototype, \"currentState\", {\n        get: function () {\n            return this.stateTracker.state;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    EntityComponentSystem.prototype.checkSystems = function (systems) {\n        for (var i = 0; i < systems.length; ++i) {\n            var prefixI = systems[i].spawnPrefix;\n            for (var j = i + 1; j < systems.length; ++j)\n                if (systems[j].spawnPrefix == prefixI)\n                    throw new Error(\"System spawn prefix collision: \" + prefixI + \". Systems: \" + systems[i].constructor + \" and \" + systems[j].constructor);\n        }\n    };\n    return EntityComponentSystem;\n}());\n\n\n\n//# sourceURL=webpack:///./src/EntityComponentSystem.ts?");

/***/ }),

/***/ "./src/GamestateTracker.ts":
/*!*********************************!*\
  !*** ./src/GamestateTracker.ts ***!
  \*********************************/
/*! exports provided: getEntityGroupName, GameStateTracker */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getEntityGroupName\", function() { return getEntityGroupName; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GameStateTracker\", function() { return GameStateTracker; });\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util */ \"./src/util.ts\");\n\nfunction getEntityGroupName(components) {\n    return components.sort().join('-');\n}\n/** The game state tracker class applies updates to a game state (in place) and keeps a set of entity groups updated  */\nvar GameStateTracker = /** @class */ (function () {\n    function GameStateTracker(initialState, groups) {\n        if (groups === void 0) { groups = []; }\n        this.setState(Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"cloneGameState\"])(initialState));\n        for (var _i = 0, groups_1 = groups; _i < groups_1.length; _i++) {\n            var group = groups_1[_i];\n            this.addGroup(group);\n        }\n        this.idCounter = 0;\n    }\n    GameStateTracker.prototype.addGroup = function (components) {\n        // Generate the name\n        var name = getEntityGroupName(components);\n        // Check whether group exists\n        if (this.groups[name])\n            return this.groups[name];\n        // Find entities which match the group.\n        var entities = [];\n        for (var id in this.state.entities) {\n            var e = this.state.entities[id];\n            if (Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"entityHasComponents\"])(e, components))\n                entities.push(id);\n        }\n        var group = {\n            name: name,\n            components: components,\n            entities: entities,\n        };\n        this.groups[name] = group;\n    };\n    GameStateTracker.prototype.fetchGroup = function (name) {\n        return this.groups[name];\n    };\n    GameStateTracker.prototype.fetchGroupState = function (name) {\n        var ids = this.groups[name].entities;\n        var substate = {};\n        for (var _i = 0, ids_1 = ids; _i < ids_1.length; _i++) {\n            var id = ids_1[_i];\n            substate[id] = this.state.entities[id];\n        }\n        return substate;\n    };\n    GameStateTracker.prototype.modifyState = function (updates) {\n        // For each entity,\n        // if(updates.create) {\n        //     for(let newEntity of updates.create) {\n        //         let id = this.generateNewEntityId(updates);\n        //         this.createEntity(id, {id, ...newEntity});\n        //     }\n        // }\n        for (var id in updates) {\n            if (updates[id] === undefined) {\n                // Skip, maybe log a warning because this shouldn't happen.\n                console.warn(\"This shouldn't happen.\");\n                continue;\n            }\n            if (updates[id] === null) {\n                // Delete entity\n                this.deleteEntity(id);\n            }\n            else {\n                // If entity exists,\n                if (this.state.entities[id]) {\n                    // modify the entity.\n                    this.modifyEntity(id, updates[id]);\n                }\n                else {\n                    // otherwise create the entity.\n                    if (typeof updates[id].id == 'string') {\n                        this.createEntity(id, updates[id]);\n                    }\n                    else\n                        throw new Error(\"Attempt to modify entity (id = '\" + id + \"') which does not exist. Update = \" + JSON.stringify(updates, null, 4));\n                }\n            }\n        }\n    };\n    GameStateTracker.prototype.fetchEntity = function (id) {\n        return this.state.entities[id];\n    };\n    GameStateTracker.prototype.deleteEntity = function (id) {\n        var e = this.state.entities[id];\n        delete this.state.entities[id];\n        for (var name_1 in this.groups) {\n            if (Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"entityHasComponents\"])(e, this.groups[name_1].components)) {\n                console.log(\"Removing entity #\" + id + \" from group '\" + name_1 + \"'\");\n                var idx = this.groups[name_1].entities.indexOf(id);\n                if (idx != -1)\n                    this.groups[name_1].entities.splice(idx, 1);\n                else\n                    console.warn(\"Entity #\" + id + \" was not in group as expected: '\" + name_1 + \"'\");\n            }\n        }\n    };\n    GameStateTracker.prototype.createEntity = function (id, initialState) {\n        console.log(\"##\\u00A0Creating entitiy: \" + id + \"\\ninitial state:\", initialState);\n        var e = { id: id };\n        this.state.entities[id] = e;\n        this.modifyEntity(id, initialState);\n    };\n    GameStateTracker.prototype.modifyEntity = function (id, update) {\n        var e = this.state.entities[id];\n        for (var component in update) {\n            if (update[component] == null) {\n                // remove the component\n                delete e[component];\n                for (var name_2 in this.groups)\n                    if (this.groups[name_2].components.includes(component)) {\n                        var idx = this.groups[name_2].entities.indexOf(id);\n                        if (idx != -1)\n                            this.groups[name_2].entities.splice(idx, 1);\n                    }\n            }\n            else if (e[component]) {\n                // modify the component\n                Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"deepAssign\"])(e[component], update[component]);\n            }\n            else {\n                // add the component\n                e[component] = update[component];\n                for (var name_3 in this.groups) {\n                    var group = this.groups[name_3];\n                    if (group.components.includes(component) && Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"entityHasComponents\"])(e, group.components)) {\n                        console.log(\"##\\u00A0adding \" + id + \" to group \" + name_3);\n                        group.entities.push(id);\n                    }\n                }\n            }\n        }\n    };\n    GameStateTracker.prototype.setState = function (state) {\n        this.state = state;\n        this.rebuildGroups();\n    };\n    GameStateTracker.prototype.rebuildGroups = function () {\n        var groupDefs = [];\n        for (var name_4 in this.groups)\n            groupDefs.push(this.groups[name_4].components);\n        this.groups = {};\n        for (var _i = 0, groupDefs_1 = groupDefs; _i < groupDefs_1.length; _i++) {\n            var components = groupDefs_1[_i];\n            this.addGroup(components);\n        }\n    };\n    GameStateTracker.prototype.generateNewEntityId = function (update) {\n        var id = this.idCounter + 1;\n        if (update)\n            while (this.state.entities[id] || update[id])\n                ++id;\n        else\n            while (this.state.entities[id])\n                ++id;\n        this.idCounter = id;\n        return id.toString();\n    };\n    return GameStateTracker;\n}());\n\n\n\n//# sourceURL=webpack:///./src/GamestateTracker.ts?");

/***/ }),

/***/ "./src/Renderer.ts":
/*!*************************!*\
  !*** ./src/Renderer.ts ***!
  \*************************/
/*! exports provided: Renderer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Renderer\", function() { return Renderer; });\n/* harmony import */ var _EntityComponentSystem__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EntityComponentSystem */ \"./src/EntityComponentSystem.ts\");\n/* harmony import */ var _systems_rendering_RenderSystem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./systems/rendering/RenderSystem */ \"./src/systems/rendering/RenderSystem.ts\");\n/* harmony import */ var _Camera__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Camera */ \"./src/Camera.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Renderer = /** @class */ (function (_super) {\n    __extends(Renderer, _super);\n    function Renderer(_a) {\n        var canvas = _a.canvas, systems = _a.systems, initialState = _a.initialState;\n        var _this = this;\n        for (var _i = 0, systems_1 = systems; _i < systems_1.length; _i++) {\n            var system = systems_1[_i];\n            if (!(system instanceof _systems_rendering_RenderSystem__WEBPACK_IMPORTED_MODULE_1__[\"RenderSystem\"]))\n                throw new Error(\"All systems in the renederer must be RenderSystem instances.\");\n        }\n        _this = _super.call(this, { initialState: initialState, systems: systems }) || this;\n        _this.camera = new _Camera__WEBPACK_IMPORTED_MODULE_2__[\"Camera\"]({ scale: 1 / 2, canvasHeight: canvas.height, canvasWidth: canvas.width });\n        if (canvas)\n            _this.adoptCanvas(canvas);\n        // Claim the systems\n        for (var _b = 0, systems_2 = systems; _b < systems_2.length; _b++) {\n            var system = systems_2[_b];\n            system.renderer = _this;\n        }\n        return _this;\n    }\n    Renderer.prototype.adoptCanvas = function (canvas) {\n        if (this.canvas)\n            throw new Error(\"Renderer already has a <canvas> element\");\n        this.canvas = canvas;\n        this.ctx = canvas.getContext('2d');\n    };\n    Renderer.prototype.renderUpdate = function (update, io) {\n        this.stateTracker.modifyState(update);\n        this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        this.camera.tick(this.currentState, io);\n        this.cycleSystems(io);\n    };\n    Renderer.prototype.renderState = function (state, io) {\n        this.stateTracker.setState(state);\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        this.cycleSystems(io);\n    };\n    /** Psuedo-concurrently run all systems without modifying state. */\n    Renderer.prototype.cycleSystems = function (io) {\n        var _this = this;\n        // Loop through the systems,\n        for (var _i = 0, _a = this.systems; _i < _a.length; _i++) {\n            var system = _a[_i];\n            // Select groups\n            var groups = system.groupNames.map(function (groupName) { return _this.stateTracker.fetchGroupState(groupName); });\n            // Apply behaviour to the matches\n            var groupUpdate = system.behaviour(groups, io);\n            // if(groupUpdate)\n            //     throw new Error('Renderer systems should not return state updates.')\n        }\n    };\n    return Renderer;\n}(_EntityComponentSystem__WEBPACK_IMPORTED_MODULE_0__[\"EntityComponentSystem\"]));\n\n\n\n//# sourceURL=webpack:///./src/Renderer.ts?");

/***/ }),

/***/ "./src/UserInputReporter.ts":
/*!**********************************!*\
  !*** ./src/UserInputReporter.ts ***!
  \**********************************/
/*! exports provided: UserInputReporter, mergeUserInputReports, emptyUIReport */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"UserInputReporter\", function() { return UserInputReporter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"mergeUserInputReports\", function() { return mergeUserInputReports; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"emptyUIReport\", function() { return emptyUIReport; });\nvar __spreadArrays = (undefined && undefined.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nvar UserInputReporter = /** @class */ (function () {\n    function UserInputReporter() {\n        this.message = \"\";\n        this.downKeys = {};\n        this.clicks = [];\n    }\n    UserInputReporter.prototype.adoptCanvas = function (canvas) {\n        if (this.canvas)\n            this.releaseCanvas();\n        this.canvas = canvas;\n        canvas.tabIndex = 0;\n        canvas.focus();\n        canvas.addEventListener('keydown', this.handleKeyDown.bind(this));\n        canvas.addEventListener('keyup', this.handleKeyUp.bind(this));\n        canvas.addEventListener('mousedown', this.handleMouseDown.bind(this));\n    };\n    UserInputReporter.prototype.releaseCanvas = function () {\n        this.canvas.removeEventListener('keydown', this.handleKeyDown);\n        this.canvas.removeEventListener('keyup', this.handleKeyUp);\n        this.canvas.removeEventListener('mousedown', this.handleMouseDown);\n    };\n    UserInputReporter.prototype.previewReport = function () {\n        return {\n            downKeys: this.downKeys,\n            clicks: this.clicks,\n            message: this.sendMessage ? this.message : undefined,\n        };\n    };\n    UserInputReporter.prototype.getReport = function () {\n        var report = {\n            downKeys: this.downKeys,\n            clicks: this.clicks,\n            message: this.sendMessage ? this.message : undefined,\n        };\n        // Clear the report\n        this.clicks = [];\n        if (this.sendMessage)\n            this.message = '';\n        this.sendMessage = false;\n        return report;\n    };\n    UserInputReporter.prototype.handleKeyDown = function (e) {\n        // console.log(`handleKeyDown(${e.key})`)\n        this.downKeys[e.keyCode] = true;\n        if (!e.metaKey && !e.ctrlKey && !e.altKey) {\n            // Add to the message\n            if (/^[A-Za-z0-9 .,?!]$/.test(e.key))\n                this.message += e.key;\n            else if (e.key == 'Backspace')\n                this.message = this.message.slice(0, -1);\n            else if (e.keyCode == 13)\n                this.sendMessage = true;\n        }\n        e.preventDefault();\n    };\n    UserInputReporter.prototype.handleKeyUp = function (e) {\n        // console.log(`## handleKeyUp(${e})`)\n        this.downKeys[e.keyCode] = false;\n        e.preventDefault();\n    };\n    UserInputReporter.prototype.handleMouseDown = function (e) {\n        // TODO: Apply camera transformation to the clicks.\n        this.canvas.focus();\n        this.clicks.push({ x: e.clientX, y: e.clientY });\n        // e.preventDefault();\n    };\n    return UserInputReporter;\n}());\n\nfunction mergeUserInputReports(a, b) {\n    var message = undefined;\n    if (a.message) {\n        if (b.message)\n            message = a.message + \"\\n\" + b.message;\n        else\n            message = a.message;\n    }\n    else\n        message = b.message;\n    var clicks = __spreadArrays(a.clicks, b.clicks);\n    var downKeys = {};\n    Object.assign(downKeys, a.downKeys);\n    for (var i in b.downKeys) {\n        if (b.downKeys[i])\n            downKeys[i] = true;\n    }\n    return {\n        downKeys: downKeys,\n        clicks: clicks,\n        message: message,\n    };\n}\nfunction emptyUIReport() {\n    return {\n        clicks: [],\n        downKeys: {},\n    };\n}\n\n\n//# sourceURL=webpack:///./src/UserInputReporter.ts?");

/***/ }),

/***/ "./src/client-server-model/GameClient.ts":
/*!***********************************************!*\
  !*** ./src/client-server-model/GameClient.ts ***!
  \***********************************************/
/*! exports provided: GameClient */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GameClient\", function() { return GameClient; });\n/* harmony import */ var _Renderer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Renderer */ \"./src/Renderer.ts\");\n/* harmony import */ var _UserInputReporter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../UserInputReporter */ \"./src/UserInputReporter.ts\");\n\n\nvar GameClient = /** @class */ (function () {\n    function GameClient(_a) {\n        var _this = this;\n        var game = _a.game, canvas = _a.canvas, socket = _a.socket;\n        this.renderer = new _Renderer__WEBPACK_IMPORTED_MODULE_0__[\"Renderer\"]({\n            canvas: canvas,\n            systems: game.renderSystems,\n            initialState: game.initialState\n        });\n        this.uiReporter = new _UserInputReporter__WEBPACK_IMPORTED_MODULE_1__[\"UserInputReporter\"];\n        this.uiReporter.adoptCanvas(canvas);\n        this.frameRate = game.frameRate;\n        this.frameInterval = 1 / this.frameRate;\n        this.socket = socket;\n        var userInput = [];\n        userInput[this.playerIndex] = this.uiReporter.previewReport();\n        this.socket.on('state update', function (update) {\n            console.log('## state update:', update);\n            _this.renderer.renderUpdate(update, {\n                elapsed: _this.frameInterval,\n                userInput: userInput,\n            });\n        });\n        this.socket.on('initial state', function (state) {\n            _this.renderer.renderState(state, {\n                elapsed: _this.frameInterval,\n                userInput: userInput,\n            });\n        });\n        this.socket.on('playerIndex', function (i) {\n            _this.playerIndex = i;\n        });\n    }\n    ;\n    GameClient.prototype.sendUIReport = function () {\n        var report = this.uiReporter.getReport();\n        this.socket.emit('uireport', report);\n    };\n    GameClient.prototype.start = function () {\n        var _this = this;\n        setInterval(function () { return _this.sendUIReport(); }, 1000 * this.frameInterval);\n    };\n    return GameClient;\n}());\n\n\n\n//# sourceURL=webpack:///./src/client-server-model/GameClient.ts?");

/***/ }),

/***/ "./src/demo.game.ts":
/*!**************************!*\
  !*** ./src/demo.game.ts ***!
  \**************************/
/*! exports provided: demoGame */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"demoGame\", function() { return demoGame; });\n/* harmony import */ var _systems_game_mechanics_Gravity__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./systems/game-mechanics/Gravity */ \"./src/systems/game-mechanics/Gravity.ts\");\n/* harmony import */ var _systems_game_mechanics_Velocity__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./systems/game-mechanics/Velocity */ \"./src/systems/game-mechanics/Velocity.ts\");\n/* harmony import */ var _systems_game_mechanics_BouncyFloor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./systems/game-mechanics/BouncyFloor */ \"./src/systems/game-mechanics/BouncyFloor.ts\");\n/* harmony import */ var _systems_game_mechanics_LeftRightControl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./systems/game-mechanics/LeftRightControl */ \"./src/systems/game-mechanics/LeftRightControl.ts\");\n/* harmony import */ var _systems_game_mechanics_MessageSystem__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./systems/game-mechanics/MessageSystem */ \"./src/systems/game-mechanics/MessageSystem.ts\");\n/* harmony import */ var _systems_game_mechanics_Friction__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./systems/game-mechanics/Friction */ \"./src/systems/game-mechanics/Friction.ts\");\n/* harmony import */ var _systems_game_mechanics_TimeOut__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./systems/game-mechanics/TimeOut */ \"./src/systems/game-mechanics/TimeOut.ts\");\n/* harmony import */ var _systems_rendering_BoxSprite__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./systems/rendering/BoxSprite */ \"./src/systems/rendering/BoxSprite.ts\");\n/* harmony import */ var _systems_rendering_Label__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./systems/rendering/Label */ \"./src/systems/rendering/Label.ts\");\n\n\n\n\n\n\n\n\n\nvar demoGame = {\n    frameRate: 12,\n    systems: [\n        new _systems_game_mechanics_Gravity__WEBPACK_IMPORTED_MODULE_0__[\"GravitySystem\"],\n        new _systems_game_mechanics_Velocity__WEBPACK_IMPORTED_MODULE_1__[\"VelocitySystem\"],\n        new _systems_game_mechanics_BouncyFloor__WEBPACK_IMPORTED_MODULE_2__[\"BouncyFloorSystem\"]({ y: 200 }),\n        new _systems_game_mechanics_LeftRightControl__WEBPACK_IMPORTED_MODULE_3__[\"LeftRightControlSystem\"],\n        new _systems_game_mechanics_MessageSystem__WEBPACK_IMPORTED_MODULE_4__[\"MessageSystem\"],\n        new _systems_game_mechanics_Friction__WEBPACK_IMPORTED_MODULE_5__[\"FrictionSystem\"],\n        new _systems_game_mechanics_TimeOut__WEBPACK_IMPORTED_MODULE_6__[\"TimeOutSystem\"],\n    ],\n    renderSystems: [\n        new _systems_rendering_BoxSprite__WEBPACK_IMPORTED_MODULE_7__[\"BoxSpriteSystem\"],\n        new _systems_rendering_Label__WEBPACK_IMPORTED_MODULE_8__[\"LabelSystem\"],\n    ],\n    initialState: {\n        frame: 0,\n        entities: {}\n    },\n    addPlayer: function (playerIndex, state) {\n        var _a;\n        var id = \"player\" + playerIndex;\n        return _a = {},\n            _a[id] = {\n                id: id,\n                position: { y: 0, x: 0 },\n                velocity: { xspeed: 0, yspeed: 0 },\n                label: { text: \"Player \" + playerIndex },\n                leftRightControl: { acceleration: 10, user: playerIndex },\n                message: { user: playerIndex }\n            },\n            _a;\n    },\n    removePlayer: function (playerIndex, state, addPlayerStateUpdate) {\n        var _a;\n        return _a = {},\n            _a[\"player\" + playerIndex] = {\n                timeOut: { timeRemaining: 5 },\n                velocity: { yspeed: -3 }\n            },\n            _a;\n    }\n};\n\n\n//# sourceURL=webpack:///./src/demo.game.ts?");

/***/ }),

/***/ "./src/demo.ts":
/*!*********************!*\
  !*** ./src/demo.ts ***!
  \*********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _client_server_model_GameClient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./client-server-model/GameClient */ \"./src/client-server-model/GameClient.ts\");\n/* harmony import */ var _demo_game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./demo.game */ \"./src/demo.game.ts\");\n\n\nwindow.onload = function () {\n    var socket = io();\n    var canvas = document.createElement('canvas');\n    document.body.appendChild(canvas);\n    var stateMonitor = document.createElement('pre');\n    document.body.appendChild(stateMonitor);\n    var gameClient = new _client_server_model_GameClient__WEBPACK_IMPORTED_MODULE_0__[\"GameClient\"]({ game: _demo_game__WEBPACK_IMPORTED_MODULE_1__[\"demoGame\"], socket: socket, canvas: canvas });\n    gameClient.start();\n    setInterval(function () {\n        stateMonitor.innerText = JSON.stringify(gameClient.renderer.currentState, null, 4);\n    }, 250);\n};\n\n\n//# sourceURL=webpack:///./src/demo.ts?");

/***/ }),

/***/ "./src/systems/game-mechanics/BouncyFloor.ts":
/*!***************************************************!*\
  !*** ./src/systems/game-mechanics/BouncyFloor.ts ***!
  \***************************************************/
/*! exports provided: BouncyFloorSystem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BouncyFloorSystem\", function() { return BouncyFloorSystem; });\n/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../system */ \"./src/systems/system.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar BouncyFloorSystem = /** @class */ (function (_super) {\n    __extends(BouncyFloorSystem, _super);\n    function BouncyFloorSystem(_a) {\n        var y = _a.y, _b = _a.left, left = _b === void 0 ? null : _b, _c = _a.right, right = _c === void 0 ? null : _c;\n        var _this = _super.call(this, {\n            reads: ['position', 'velocity', 'bouncyFloor'],\n            writes: ['position', 'velocity'],\n        }) || this;\n        _this.y = y;\n        _this.right = right;\n        _this.left = left;\n        return _this;\n    }\n    BouncyFloorSystem.prototype.individualBehaviour = function (e, io) {\n        var _a = e.bouncyFloor.bounce, bounce = _a === void 0 ? 1 : _a;\n        if (e.position.y > this.y &&\n            (this.left === null || this.left < e.position.x) &&\n            (this.right === null || this.right > e.position.x)) {\n            return {\n                position: { y: this.y },\n                velocity: { yspeed: -Math.abs(e.velocity.yspeed) * bounce },\n            };\n        }\n        else {\n            return {};\n        }\n    };\n    return BouncyFloorSystem;\n}(_system__WEBPACK_IMPORTED_MODULE_0__[\"IntrospectiveSystem\"]));\n\n\n\n//# sourceURL=webpack:///./src/systems/game-mechanics/BouncyFloor.ts?");

/***/ }),

/***/ "./src/systems/game-mechanics/Friction.ts":
/*!************************************************!*\
  !*** ./src/systems/game-mechanics/Friction.ts ***!
  \************************************************/
/*! exports provided: FrictionSystem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FrictionSystem\", function() { return FrictionSystem; });\n/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../system */ \"./src/systems/system.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar FrictionSystem = /** @class */ (function (_super) {\n    __extends(FrictionSystem, _super);\n    function FrictionSystem() {\n        return _super.call(this, {\n            reads: ['velocity', 'friction'],\n            writes: ['velocity'],\n        }) || this;\n    }\n    FrictionSystem.prototype.individualBehaviour = function (e) {\n        // TODO: Apply friction according to elapsed frame time.\n        return {\n            velocity: {\n                xspeed: e.velocity.xspeed * e.friction.friction,\n                yspeed: e.velocity.yspeed * e.friction.friction\n            }\n        };\n    };\n    return FrictionSystem;\n}(_system__WEBPACK_IMPORTED_MODULE_0__[\"IntrospectiveSystem\"]));\n\n\n\n//# sourceURL=webpack:///./src/systems/game-mechanics/Friction.ts?");

/***/ }),

/***/ "./src/systems/game-mechanics/Gravity.ts":
/*!***********************************************!*\
  !*** ./src/systems/game-mechanics/Gravity.ts ***!
  \***********************************************/
/*! exports provided: GravitySystem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GravitySystem\", function() { return GravitySystem; });\n/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../system */ \"./src/systems/system.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar GravitySystem = /** @class */ (function (_super) {\n    __extends(GravitySystem, _super);\n    function GravitySystem(options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this, {\n            reads: ['gravity', 'velocity'],\n            writes: ['velocity'],\n        }) || this;\n        _this.g = options.g || 9.81;\n        return _this;\n    }\n    GravitySystem.prototype.individualBehaviour = function (e, io) {\n        var yspeed = e.velocity.yspeed + this.g * io.elapsed;\n        return {\n            velocity: {\n                yspeed: yspeed,\n            }\n        };\n    };\n    return GravitySystem;\n}(_system__WEBPACK_IMPORTED_MODULE_0__[\"IntrospectiveSystem\"]));\n\n\n\n//# sourceURL=webpack:///./src/systems/game-mechanics/Gravity.ts?");

/***/ }),

/***/ "./src/systems/game-mechanics/LeftRightControl.ts":
/*!********************************************************!*\
  !*** ./src/systems/game-mechanics/LeftRightControl.ts ***!
  \********************************************************/
/*! exports provided: LeftRightControlSystem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LeftRightControlSystem\", function() { return LeftRightControlSystem; });\n/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../system */ \"./src/systems/system.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar LeftRightControlSystem = /** @class */ (function (_super) {\n    __extends(LeftRightControlSystem, _super);\n    function LeftRightControlSystem() {\n        return _super.call(this, {\n            reads: ['velocity', 'leftRightControl'],\n            writes: ['velocity'],\n        }) || this;\n    }\n    LeftRightControlSystem.prototype.individualBehaviour = function (e, io) {\n        var userInput = io.userInput[e.leftRightControl.user];\n        if (userInput.downKeys[37]) {\n            var xspeed = e.velocity.xspeed - (e.leftRightControl.acceleration || 5) * io.elapsed;\n            return { velocity: { xspeed: xspeed } };\n        }\n        else if (userInput.downKeys[39]) {\n            return {\n                velocity: { xspeed: e.velocity.xspeed + e.leftRightControl.acceleration * io.elapsed }\n            };\n        }\n    };\n    return LeftRightControlSystem;\n}(_system__WEBPACK_IMPORTED_MODULE_0__[\"IntrospectiveSystem\"]));\n\n\n\n//# sourceURL=webpack:///./src/systems/game-mechanics/LeftRightControl.ts?");

/***/ }),

/***/ "./src/systems/game-mechanics/MessageSystem.ts":
/*!*****************************************************!*\
  !*** ./src/systems/game-mechanics/MessageSystem.ts ***!
  \*****************************************************/
/*! exports provided: MessageSystem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MessageSystem\", function() { return MessageSystem; });\n/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../system */ \"./src/systems/system.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar MessageSystem = /** @class */ (function (_super) {\n    __extends(MessageSystem, _super);\n    function MessageSystem() {\n        return _super.call(this, {\n            reads: [['message', 'position']],\n            spawns: true,\n        }) || this;\n    }\n    MessageSystem.prototype.behaviour = function (_a, io) {\n        var group = _a[0];\n        var newMessages = {};\n        var n = 0;\n        for (var id in group) {\n            var e = group[id];\n            var userInput = io.userInput[e.message.user];\n            if (userInput.message) {\n                // Create a new message\n                var msgID = this.generateNewEntityId();\n                newMessages[msgID] = {\n                    id: msgID,\n                    label: { text: userInput.message },\n                    position: {\n                        x: e.position.x,\n                        y: e.position.y,\n                    },\n                    velocity: {\n                        xspeed: 0,\n                        yspeed: -2,\n                    },\n                    timeOut: { timeRemaining: 10 }\n                };\n                ++n;\n            }\n        }\n        if (n)\n            return newMessages;\n    };\n    return MessageSystem;\n}(_system__WEBPACK_IMPORTED_MODULE_0__[\"System\"]));\n\n\n\n//# sourceURL=webpack:///./src/systems/game-mechanics/MessageSystem.ts?");

/***/ }),

/***/ "./src/systems/game-mechanics/TimeOut.ts":
/*!***********************************************!*\
  !*** ./src/systems/game-mechanics/TimeOut.ts ***!
  \***********************************************/
/*! exports provided: TimeOutSystem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TimeOutSystem\", function() { return TimeOutSystem; });\n/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../system */ \"./src/systems/system.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar TimeOutSystem = /** @class */ (function (_super) {\n    __extends(TimeOutSystem, _super);\n    function TimeOutSystem() {\n        return _super.call(this, {\n            reads: ['timeOut'],\n            deletes: true,\n        }) || this;\n    }\n    TimeOutSystem.prototype.individualBehaviour = function (e, io) {\n        var timeRemaining = e.timeOut.timeRemaining - io.elapsed;\n        if (timeRemaining > 0)\n            return { timeOut: { timeRemaining: timeRemaining } };\n        else\n            // Delete the entitiy\n            return null;\n    };\n    return TimeOutSystem;\n}(_system__WEBPACK_IMPORTED_MODULE_0__[\"IntrospectiveSystem\"]));\n\n\n\n//# sourceURL=webpack:///./src/systems/game-mechanics/TimeOut.ts?");

/***/ }),

/***/ "./src/systems/game-mechanics/Velocity.ts":
/*!************************************************!*\
  !*** ./src/systems/game-mechanics/Velocity.ts ***!
  \************************************************/
/*! exports provided: VelocitySystem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"VelocitySystem\", function() { return VelocitySystem; });\n/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../system */ \"./src/systems/system.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar VelocitySystem = /** @class */ (function (_super) {\n    __extends(VelocitySystem, _super);\n    function VelocitySystem() {\n        return _super.call(this, {\n            reads: ['velocity', 'position'],\n            writes: ['position'],\n        }) || this;\n    }\n    VelocitySystem.prototype.individualBehaviour = function (e) {\n        if (e.velocity.xspeed != 0 || e.velocity.yspeed != 0)\n            return {\n                position: {\n                    x: e.position.x + e.velocity.xspeed,\n                    y: e.position.y + e.velocity.yspeed,\n                }\n            };\n    };\n    return VelocitySystem;\n}(_system__WEBPACK_IMPORTED_MODULE_0__[\"IntrospectiveSystem\"]));\n\n\n\n//# sourceURL=webpack:///./src/systems/game-mechanics/Velocity.ts?");

/***/ }),

/***/ "./src/systems/rendering/BoxSprite.ts":
/*!********************************************!*\
  !*** ./src/systems/rendering/BoxSprite.ts ***!
  \********************************************/
/*! exports provided: BoxSpriteSystem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BoxSpriteSystem\", function() { return BoxSpriteSystem; });\n/* harmony import */ var _RenderSystem__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./RenderSystem */ \"./src/systems/rendering/RenderSystem.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n// export const BoxSpriteSystem = new System({\n//     reads: ['position', 'boxSprite'],\n//     writes: [],\n//     individualBehaviour(e: {position: PositionComponentState, boxSprite:BoxSpriteComponentState}, io:IOObject) {\n//         if(io.ctx) {\n//             const ctx = io.ctx;\n//             const {top=0, left=0, right=0, bottom=0, color='#ff0000'} = e.boxSprite;\n//             const {x, y} = e.position;\n//             ctx.fillStyle = color;\n//             ctx.fillRect(\n//                 x - left,\n//                 y - top,\n//                 left + right,\n//                 top + bottom\n//             );\n//             return {}\n//         } else {\n//             throw 'BoxSprite system requires a rendering context.';\n//         }\n//     }\n// })\n/** @deprecated */\nvar BoxSpriteSystem = /** @class */ (function (_super) {\n    __extends(BoxSpriteSystem, _super);\n    function BoxSpriteSystem() {\n        return _super.call(this, {\n            reads: ['position', 'boxSprite'],\n        }) || this;\n    }\n    BoxSpriteSystem.prototype.individualBehaviour = function (e, io) {\n        var ctx = this.renderer.ctx;\n        var _a = e.boxSprite, _b = _a.top, top = _b === void 0 ? 0 : _b, _c = _a.left, left = _c === void 0 ? 0 : _c, _d = _a.right, right = _d === void 0 ? 0 : _d, _e = _a.bottom, bottom = _e === void 0 ? 0 : _e, _f = _a.color, color = _f === void 0 ? '#ff0000' : _f;\n        var _g = e.position, x = _g.x, y = _g.y;\n        ctx.fillStyle = color;\n        ctx.fillRect(x - left, y - top, left + right, top + bottom);\n        return {};\n    };\n    return BoxSpriteSystem;\n}(_RenderSystem__WEBPACK_IMPORTED_MODULE_0__[\"RenderSystem\"]));\n\n\n\n//# sourceURL=webpack:///./src/systems/rendering/BoxSprite.ts?");

/***/ }),

/***/ "./src/systems/rendering/Label.ts":
/*!****************************************!*\
  !*** ./src/systems/rendering/Label.ts ***!
  \****************************************/
/*! exports provided: LabelSystem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LabelSystem\", function() { return LabelSystem; });\n/* harmony import */ var _RenderSystem__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./RenderSystem */ \"./src/systems/rendering/RenderSystem.ts\");\n/* harmony import */ var _Camera__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Camera */ \"./src/Camera.ts\");\n/* harmony import */ var transformation_matrix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! transformation-matrix */ \"./node_modules/transformation-matrix/src/index.js\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n/** @deprecated */\nvar LabelSystem = /** @class */ (function (_super) {\n    __extends(LabelSystem, _super);\n    function LabelSystem() {\n        return _super.call(this, {\n            reads: ['label', 'position'],\n        }) || this;\n    }\n    LabelSystem.prototype.individualBehaviour = function (e, io) {\n        var x = e.position.x + (e.label.xOffset || 0);\n        var y = e.position.y + (e.label.yOffset || 0);\n        var matrix = Object(transformation_matrix__WEBPACK_IMPORTED_MODULE_2__[\"compose\"])(this.renderer.camera.matrix, Object(transformation_matrix__WEBPACK_IMPORTED_MODULE_2__[\"translate\"])(x, y));\n        var ctx = this.renderer.ctx;\n        ctx.setTransform.apply(ctx, Object(_Camera__WEBPACK_IMPORTED_MODULE_1__[\"toArrayMatrix\"])(matrix));\n        ctx.strokeText(e.label.text, 0, 0, e.label.maxWidth);\n        return undefined;\n    };\n    return LabelSystem;\n}(_RenderSystem__WEBPACK_IMPORTED_MODULE_0__[\"RenderSystem\"]));\n\n\n\n//# sourceURL=webpack:///./src/systems/rendering/Label.ts?");

/***/ }),

/***/ "./src/systems/rendering/RenderSystem.ts":
/*!***********************************************!*\
  !*** ./src/systems/rendering/RenderSystem.ts ***!
  \***********************************************/
/*! exports provided: RenderSystem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RenderSystem\", function() { return RenderSystem; });\n/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../system */ \"./src/systems/system.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar RenderSystem = /** @class */ (function (_super) {\n    __extends(RenderSystem, _super);\n    function RenderSystem(_a) {\n        var reads = _a.reads;\n        return _super.call(this, {\n            reads: reads,\n            writes: [],\n            deletes: false,\n        }) || this;\n    }\n    return RenderSystem;\n}(_system__WEBPACK_IMPORTED_MODULE_0__[\"IntrospectiveSystem\"]));\n\n\n\n//# sourceURL=webpack:///./src/systems/rendering/RenderSystem.ts?");

/***/ }),

/***/ "./src/systems/system.ts":
/*!*******************************!*\
  !*** ./src/systems/system.ts ***!
  \*******************************/
/*! exports provided: System, IntrospectiveSystem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"System\", function() { return System; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"IntrospectiveSystem\", function() { return IntrospectiveSystem; });\n/* harmony import */ var _GamestateTracker__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../GamestateTracker */ \"./src/GamestateTracker.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n/** Base class for all systems */\nvar System = /** @class */ (function () {\n    function System(options) {\n        var reads = options.reads, _a = options.writes, writes = _a === void 0 ? [] : _a, _b = options.spawns, spawns = _b === void 0 ? false : _b, _c = options.deletes, deletes = _c === void 0 ? false : _c, _d = options.spawnPrefix, spawnPrefix = _d === void 0 ? this.constructor.name.toLowerCase() : _d;\n        this.reads = reads;\n        this.writes = writes;\n        this.spawns = spawns;\n        this.deletes = deletes;\n        this.spawnPrefix = spawnPrefix;\n        this.spawnCounter = 0;\n        this.groupNames = this.reads.map(function (components) { return Object(_GamestateTracker__WEBPACK_IMPORTED_MODULE_0__[\"getEntityGroupName\"])(components); });\n    }\n    System.prototype.behaviour = function (groups, io) {\n        throw \"Behaviour is not implemented for this system.\";\n    };\n    System.prototype.generateNewEntityId = function () {\n        return \"\" + this.spawnPrefix + this.spawnCounter++;\n    };\n    return System;\n}());\n\n/** Introspective systems modify one entity state at a time. */\nvar IntrospectiveSystem = /** @class */ (function (_super) {\n    __extends(IntrospectiveSystem, _super);\n    function IntrospectiveSystem(options) {\n        return _super.call(this, {\n            reads: [options.reads],\n            writes: options.writes || [],\n            deletes: options.deletes || false,\n            spawns: false,\n        }) || this;\n    }\n    IntrospectiveSystem.prototype.behaviour = function (groups, io) {\n        // There should be just the one group\n        var group = groups[0];\n        var updates = {};\n        var n = 0;\n        for (var id in group) {\n            var e = group[id];\n            var result = this.individualBehaviour(e, io);\n            if (result === undefined)\n                continue;\n            else {\n                updates[id] = result;\n                ++n;\n            }\n        }\n        if (n)\n            return updates;\n    };\n    IntrospectiveSystem.prototype.individualBehaviour = function (e, io) {\n        throw \"Behaviour of introspective system is not defined.\";\n    };\n    return IntrospectiveSystem;\n}(System));\n\n\n\n//# sourceURL=webpack:///./src/systems/system.ts?");

/***/ }),

/***/ "./src/util.ts":
/*!*********************!*\
  !*** ./src/util.ts ***!
  \*********************/
/*! exports provided: deepAssign, copyState, entityHasComponents, cloneGameState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"deepAssign\", function() { return deepAssign; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"copyState\", function() { return copyState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"entityHasComponents\", function() { return entityHasComponents; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"cloneGameState\", function() { return cloneGameState; });\n/** Merge two objects on a recursive, deep level.\n *\n * Note: This function is non-functional, it modifies the `original` argument.\n */\nfunction deepAssign(original, updates) {\n    if (typeof original === 'object' && typeof updates === 'object') {\n        for (var key in updates) {\n            original[key] = deepAssign(original[key], updates[key]);\n        }\n        return original;\n    }\n    else\n        return updates;\n}\nfunction copyState(state) {\n    return JSON.parse(JSON.stringify(state));\n}\nfunction entityHasComponents(e, components) {\n    return components.every(function (c) { return e[c] != undefined; });\n}\nfunction cloneGameState(state) {\n    return JSON.parse(JSON.stringify(state));\n}\n\n\n//# sourceURL=webpack:///./src/util.ts?");

/***/ })

/******/ });